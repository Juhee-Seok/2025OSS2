<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8" />
    <title>HW2 - form_js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            background: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
        }
        fieldset {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        legend {
            font-weight: bold;
            padding: 0 10px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
        }
        input[type="text"],
        input[type="number"],
        input[type="email"],
        input[type="date"],
        select,
        textarea,
        input[list] {
            width: calc(100% - 22px);
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        input[type="radio"],
        input[type="checkbox"] {
            margin-right: 10px;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button[type="reset"] {
            background-color: #dc3545;
        }
        button:hover {
            opacity: 0.9;
        }
    </style>
</head>
    <body>
        <h1>Information</h1>
        <id="informationForm" action="#" method="post" novalidate>
            <fieldset>
                <legend>Inform</legend>

                <div>
                    <label for="name">Name</label>
                    <input id="name" name="name" type="text" required placeholder="Handong" />
                    <span class="hint">Please enter your full name.</span>
                    <span id="nameError" class="error" style="color: red; display: none;">Enter a valid name.</span>
                </div>

                <div>
                    <label for="student_id">Student ID</label>
                    <input id="student_id" name="student_id" type="number" required placeholder="22000000" />
                    <span class="hint">Enter your 8-digit student ID.</span>
                    <span id="studentIdError" class="error" style="color: red; display: none;">Try again.</span>
                </div>

                <div>
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" required placeholder="handong@handong.ac.kr" />
                    <span id="emailError" class="error" style="color: red; display: none;">Enter a valid email address.</span>
                </div>

                <div>
                    <label for="birth">Birth Date</label>
                    <input id="birth" name="birth" type="date" required />
                    <span id="birthError" class="error" style="color: red; display: none;">Select a valid date.</span>
                </div>
            </fieldset>

            <fieldset>
                <div>
                <label for="major">Major</label>
                <select id="major" name="major" required>
                    <option value="">Select your major</option>
                    <optgroup label="Engineering">
                        <option value="cs">Computer Science</option>
                        <option value="ee">Electrical Engineering</option>
                        <option value="ai">Artificial Intelligence</option>
                    </optgroup>
                </select>
                <span id="majorError" class="error" style="color: red; display: none;">Choose your major.</span>
                </div>

                <div>
                <label for="Term">Term</label>
                <input list="Term" id="term" name="term" placeholder="Select your term" />
                <datalist id="Term">
                    <option value="1st Term"></option>
                    <option value="2nd Term"></option>
                    <option value="3rd Term"></option>
                    <option value="4th Term"></option>
                    <option value="5th Term"></option>
                    <option value="6th Term"></option>
                    <option value="7th Term"></option>
                    <option value="8th Term"></option>
                </datalist>
                <span class="hint">optional</span>
                </div>
            </fieldset>

            <fieldset>
                <legend>e.g.</legend>

                <div>
                    <span>Gender</span>
                    <label><input type="radio" name="gender" value="male" required /> Male</label>
                    <label><input type="radio" name="gender" value="female" required /> Female</label>
                    <span id="genderError" class="error" style="color: red; display: none;">Select your gender.</span>
                </div>
                    
                <div>
                    <span>interests</span>
                    <label><input type="checkbox" name="interests" value="ai" required /> AI</label>
                    <label><input type="checkbox" name="interests" value="web service" required /> Web Service</label>
                    <label><input type="checkbox" name="interests" value="os" required /> Operating Systems</label>
                    <label><input type="checkbox" name="interests" value="app" required /> App Development</label>
                    <label><input type="checkbox" name="interests" value="security" required /> Security</label>
                    <span id="interestsError" class="error" style="color: red; display: none;">Select at least one interest.</span>
                </div>

                <div>
                    <label for="credits">Credits</label>
                    <input id="credits" name="credits" type="number" min="0" max="21" step="1" value="18" />
                    <span class="hint">0-21</span>
                    <span id="creditsError" class="error" style="color: red; display: none;">Enter a number between 0 and 21.</span>
                </div>

                <div>
                    <label for="introduce">A short introduction</label>
                    <textarea id="introduce" name="introduce" rows="5" cols="33" placeholder="Hello! I'm ..."></textarea>
                    <span class="hint">min 10 characters</span>
                    <span id="introduceError" class="error" style="color: red; display: none;">Please write at least 10 characters.</span>
                </div>

                <div>
                    <label>
                        <input id="submit" name="submit" type="checkbox" required />
                        Submit information
                    </label>
                    <span id="submitError" class="error" style="color: red; display: none;">Confirm submission.</span>
                </div>
            </fieldset>

            <div class="buttons">
                <button id="submit" type="submit" title="Submit your information">Submit</button>
                <button type="reset">Reset</button>
            </div>
        </form>

        <script>
            const $ = (sel) => document.querySelector(sel);
            const $$ = (sel) => Array.from(document.querySelectorAll(sel));
            const show = (el, on) => el && (el.style.display = on ? 'inline' : 'none');
            const glow = (el, on) => el && el.classList.toggle('glow', !!on);
        
            window.onload = function (){
                const name = $('#name');
                name.focus();
                glow(name, true);
                setTimeout(() => glow(name, false), 2000);
            };

            const form = $('#informationForm');
            const nameInput = $('#name');
            const studentIdInput = $('#student_id');
            const emailInput = $('#email');
            const birthInput = $('#birth');
            const majorSelect = $('#major');
            const genderInputs = $$('input[name="gender"]');
            const interestsBoxes = $$('input[name="interests"]');
            const creditsInput = $('#credits');
            const introduceTextarea = $('#introduce');
            const submitCheckbox = $('#submit');
            const submitButton = $('#submitbutton');

            function validateName(){
                const v = nameInput.value.trim();
                const ok = /^[A-Za-z\s]{2,40}$/.test(v);
                show($('#nameError'), !ok);
                return ok;
            }

            function validateStudentId(){
                const v = studentIdInput.value.trim();
                const ok = /^\d{8}$/.test(v);
                show($('#studentIdError'), !ok);
                return ok;
            }

            function validateEmail(){
                const v = emailInput.value.trim();
                const ok = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
                show($('#emailError'), !ok);
                return ok;
            }

            function validateBirth(){
                if(!birthInput.value) {
                    show($('#birthError'), true);
                    return false;
                }
                const birthDate = new Date(birthInput.value);
                const today = new Date(); today.setHours(0,0,0,0);
                const ok = birthDate <= today;
                show($('#birthError'), !ok);
                return ok;
            }

            function validateMajor(){
                const ok = majorSelect.value !== "";
                show($('#majorError'), !ok);
                return ok;
            }

            function validateGender(){
                const ok = genderInputs.some(input => input.checked);
                show($('#genderError'), !ok);
                return ok;
            }

            function validateInterests(){
                const ok = interestsBoxes.some(box => box.checked);
                show($('#interestsError'), !ok);
                return ok;
            }

            function validateCredits(){
                const n = Number(creditsInput.value);
                const ok = !Number.isNaN(n) && n >= 0 && n <= 21;
                show($('#creditsError'), !ok);
                return ok;
            }

            function validateIntroduce(){
                const ok = introduceTextarea.value.trim().length >= 10;
                show($('#introduceError'), !ok);
                return ok;
            }

            function validateAgree(){
                const ok = agreeChk.checked;
                show($('#submitError'), !ok);
                return ok;
            }

            function validateAll(){
                const checks = [
                    validateName(),
                    validateStudentId(),
                    validateEmail(),
                    validateBirth(),
                    validateMajor(),
                    validateGender(),
                    validateInterests(),
                    validateCredits(),
                    validateIntroduce(),
                    validateAgree()
                ];
                return checks.every(Boolean);
            }

            nameInput.addEventListener('keydown', (e) => {
                const allowed = /[a-zA-Z\s]/.test(e.key) || e.key.length > 1;
                if (!allowed) {
                    e.preventDefault();
                }
            });

            [studentInput, emailInput, birthInput, majorSelect, creditsInput, introTextarea].forEach(el => {
                el.addEventListener('change', () => validateAll());
            });

            [...interestsBoxes, ...genderInputs].forEach(el => {
                el.addEventListener('change', () => validateAll());
            });

            submitButton.addEventListener('mouseover', () => glow(submitButton, true));
            submitButton.addEventListener('mouseout', () => glow(submitButton, false));

            form.addEventListener('submit', (e) => {
                const ok = validateAll();
                if (!ok) {
                    e.preventDefault();
                    return;
                }
                const sure = confirm('Submit the form?');
                
                if(!sure)
                    e.preventDefault();
                if(sure){
                    alert('Form submitted successfully!');
                    form.reset();
                }
            });

            form.addEventListener('reset', () => {
                setTimeout(() => $$('.error').forEach(el => show(el, false)), 0);
            });
        </script>
    </body>
    </html>